# 🤖 OpenAI Integration Setup Guide

## 🎯 Overview

Your AI Candy Store RAG Demo now includes **real OpenAI integration** with:
- **GPT-3.5-turbo** for AI response generation
- **text-embedding-3-small** for vector embeddings
- **Real-time API calls** replacing mock data
- **Automatic fallback** to simple service if API unavailable

## 🔑 API Key Configuration

Your OpenAI API key has been securely configured in `backend/.env`:

```env
# Your OpenAI API key has been configured (actual key is secure and private)
OPENAI_API_KEY=sk-proj-[YOUR_OPENAI_API_KEY_HERE]
DEBUG=True
```

> ⚠️ **Security Note**: The `.env` file is already in `.gitignore` and will not be committed to your repository.

## 🚀 Starting the OpenAI-Enabled Demo

### Option 1: Automatic Start (Recommended)
```bash
# Windows
.\start_demo.bat

# Linux/Mac/Python
python start_demo.py
```

### Option 2: Manual Start
```bash
# Terminal 1 - Backend with OpenAI
cd backend
python openai_main.py

# Terminal 2 - Frontend
cd frontend
npm start
```

## ✨ New Features with OpenAI Integration

### 🧠 **Real AI Processing**
- **Actual embeddings** generated by OpenAI's `text-embedding-3-small`
- **Real similarity search** using 1536-dimensional vectors
- **GPT-3.5-turbo responses** with candy context injection

### 📊 **Enhanced Educational Content**
- **Live API metrics** showing actual processing times
- **Real vector statistics** (magnitude, sparsity, distribution)
- **Actual prompt engineering** examples with system/user prompts
- **OpenAI model information** and token usage

### 🔄 **Smart Fallback System**
If OpenAI API is unavailable:
- Automatically falls back to `SimpleRAGService`
- Demo continues working with mock data
- No interruption to the learning experience

## 🎯 Example Queries to Try

Test the real AI integration with these queries:

**English:**
- `"What's the sweetest candy you have?"`
- `"Show me chocolate treats with vanilla"`
- `"I want something sour and fruity"`

**Finnish:**
- `"Mikä on suklaisin herkku?"`
- `"Näytä minulle happamat makeiset"`
- `"Haluan jotain vaniljamakuista"`

## 🔍 Monitoring OpenAI Usage

### Health Check Endpoint
```bash
curl http://localhost:8000/health
```

Response shows OpenAI integration status:
```json
{
  "status": "healthy",
  "service": "AI Candy Store RAG Demo",
  "version": "2.0.0",
  "openai_integration": "active"
}
```

### API Documentation
Visit: http://localhost:8000/docs

## 💰 OpenAI Costs & Usage

### Current Configuration:
- **Embeddings**: `text-embedding-3-small` (~$0.00002 per 1K tokens)
- **Chat**: `gpt-3.5-turbo` (~$0.0015 per 1K tokens)
- **Typical query cost**: ~$0.001-0.005 per question

### Cost Optimization:
- Embeddings are **pre-computed** for candy data
- Only query embeddings generated per request
- Short, focused responses (150 token limit)
- Efficient context preparation

## 🛠️ Troubleshooting

### Common Issues:

**1. API Key Error**
```
ValueError: OpenAI API key not found in environment variables
```
**Solution**: Ensure `backend/.env` file exists with your API key

**2. Rate Limit Exceeded**
```
RateLimitError: Rate limit reached
```
**Solution**: Wait a moment and try again. The demo will fallback to simple service.

**3. Network/API Issues**
The system automatically falls back to mock data if OpenAI is unavailable.

## 🎓 Educational Value

### What Students Learn:
1. **Real API Integration** - See actual OpenAI API calls
2. **Vector Embeddings** - Understand 1536D semantic space
3. **Cosine Similarity** - Math behind semantic search
4. **Prompt Engineering** - How context gets injected
5. **RAG Architecture** - Complete end-to-end pipeline

### Technical Insights:
- **Embedding Generation**: Watch real vectors being created
- **Similarity Computation**: See actual cosine similarity scores
- **Context Preparation**: Observe token budget management
- **AI Generation**: Monitor real GPT responses with context

## 🔗 Repository

The complete OpenAI-integrated code is available at:
**https://github.com/SamppaFIN/RAG-Demo.git**

---

## 🎉 Ready to Explore!

Your AI Candy Store RAG Demo now features **real artificial intelligence** while maintaining its educational, step-by-step visualization. Perfect for learning how modern RAG systems work in production! 🍭🤖✨ 